<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto</title>
    <link rel="stylesheet" href="css/market.css"> 
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    
</head>
<body>
    <%- include('partials/nav.ejs') %>

    <div class="ticker">
        <script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/coinMarquee.js"></script><div id="coinmarketcap-widget-marquee" coins="1,1027,825,1839,52,20650,5426,2010,74,1799,1958,5805,3890,1975,6636,4943,2,5994,512" currency="INR" theme="dark" transparent="false" show-symbol-logo="true"></div>

    </div>
    <div class="cards">
        <section class="first-card">
            <div class="card">
                <div class="card-header">
                    <div class="header-left">
                        <label for="date">Add a New Crypto</label>
                    </div>
                </div>
                
                <div class="card-body">
                    <div class="search-container">
                        <div class="change">
                        <label for="coin-name">Enter Coin Name:</label>
                        <input type="text" id="crypto-name" placeholder="Search cryptocurrencies...">
                        <button onclick="searchCrypto()">Get Symbol</button>
                        </div>
                        <p id="crypto-symbol-result"></p>
                        <form action="market/addCrypto" method="post">
                        <div class="change">
                        <label for="coin-name">Enter Stock Symbol:</label>                      
                        <input type="text" id="crypto-search-1" list="crypto-options-1" name="crypto" placeholder="Search cryptocurrencies...">
                        <button type="submit" >Add to watch list</button>
                        </div>
                        </form>
                    </div>
                    <div id="crypto-results">
                        <!-- Results will be displayed here -->
                    </div>
                        
                </div>
            </div>
        </section>
        <section class="second-card">
            <div class="card">
                <div class="card-header">
                    <div class="header-left">
                        <label for="date">Add a New Stock</label>
                    </div>
                </div>
                
                <div class="card-body">
                    <div class="search-container">
                        <div class="change"> 
                        <label for="coin-name">Enter Company Name:</label>                        
                        <input type="text" id="companyName" placeholder="Enter company name">

                         <button onclick="fetchSymbol()">Get Symbol</button>
                        </div>
                         <p id="symbolResult"></p>

                        <form action="market/addStock" method="post">
                        <div class="change">
                        <label for="coin-name">Enter Stock Symbol:</label> 
                        
                        <input type="text" id="crypto-search-1" name="stock" list="crypto-options-1" placeholder="Search cryptocurrencies...">

                        <button type="submit" >Add to watch list</button>
                        </div> 
                           </form>
                    </div>
                    <div id="crypto-results">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </div>
        </section>
    </div>
    <div class="cards">
        <section class="first-card">
            <div class="card">
                <div class="card-header">
                    <div class="header-left">
                        <label for="date">Your Watchlist Crypto </label>
                    </div>
                </div>
                
                <div class="card-body">
                    <ul>
                        <div class="change">
                        <% stock.forEach((i) =>{  %>
                        <li onclick="handleItemCryptoClick(this)"><%= i.stock %></li>
                        
                   
                    <% }) %>
                        </div>
                    
                    </ul>
                    
            </div>
        </section>
        <section class="second-card">
            <div class="card">
                <div class="card-header">
                    <div class="header-left">
                        <label for="date">Your Watchlist Stocks</label>
                    </div>
                </div>
                
                <div class="card-body">
                    <ul>
                        <div class="change">
                        <% company.forEach((i)=>{ %>
                    <li onclick="handleItemStockClick(this)"><%= i.company %></li>
                    <% }) %>
                    </div>
                  
                    
                    </ul>
                </div>
            </div>
        </section>
    </div>
    <div>
            
            <div class="chart-container" id="tv_chart_container" style="display: none;"></div>
            <div class="stock-chart-container" id="stock_tv_chart_container" style="display: none;"></div>
            <script src="js/search-crypto.js"></script>
            <script src="js/crypto-chart.js"></script>
            <script src="js/stock-search-chart.js"></script>
            <script src="js/darkmode.js"></script>
        
    </div>

    <%- include('partials/foot.ejs') %>
    
</body>


</html>